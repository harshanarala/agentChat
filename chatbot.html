<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat Attempt</title>
</head>

<body>
    <h1>Testing Web Chat Salesforce</h1>

    <script type='text/javascript' src='https://arc-phss--digitaleng.sandbox.my.site.com/ESWMessagingserviceusin1707397130493/assets/js/bootstrap.min.js'></script>
    
    <a id="liveagent_button_online_573d0000000PEc5" href="javascript://" onclick="initEmbeddedMessaging()">
        <span class="live-chat-text">Live Chat</span>
    </a>
    <div id="liveagent_button_offline_573d0000000PEc5" style="display: none;"><!--Offline Chat Content--></div>
    
    <script type='text/javascript'>
        function initEmbeddedMessaging() {
            try {
                embeddedservice_bootstrap.settings.language = 'en_US';
                
                embeddedservice_bootstrap.init(
                    '00D3J0000001Jh4',
                    'Messaging_service_using_web',
                    'https://arc-phss--digitaleng.sandbox.my.site.com/ESWMessagingserviceusin1707397130493',
                    {
                        scrt2URL: 'https://arc-phss--digitaleng.sandbox.my.salesforce-scrt.com'
                    }
                );
                console.log('1');
                launchChat(); // Corrected function call
                console.log('2');
            } catch (err) {
                console.error('Error loading Embedded Messaging: ', err);
            }
        }
        
        function launchChat() {
            console.log('Started');
            embeddedservice_bootstrap.utilAPI.launchChat()
            .then(() => {
                disableLaunchChatButton();
            }).catch(() => {
                hideLaunchChatButton();
            }).finally(() => {
                logEndUserAttemptToChat();
            });
        }
    </script>
</body>
